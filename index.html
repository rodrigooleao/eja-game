<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>·∫∏j√° Pixel Multiplatform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { padding: 0; margin: 0; box-sizing: border-box; touch-action: none; }
        
        body {
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #fff;
            font-family: 'Pixelify Sans', cursive;
            overflow: hidden;
            text-transform: uppercase;
        }

        #game-container {
            width: 100vw;
            max-width: none;
            height: 100vh;
            background-color: #004e92;
            background-image: 
                url('assets/images/background/game-screen-bg.png'),
                linear-gradient(rgba(255,255,255,0.05) 2px, transparent 2px),
                linear-gradient(90deg, rgba(255,255,255,0.05) 2px, transparent 2px);
            background-size: 120% 120%, 20px 20px, 20px 20px;
            background-position: 0% 0%, 0 0, 0 0;
            background-repeat: no-repeat, repeat, repeat;
            border: none;
            position: fixed;
            top: 0;
            left: 0;
            overflow: hidden;
            display: none;
            transition: background-color 5s ease;
            animation: backgroundScroll 20s linear infinite;
            z-index: 1;
        }
        
        @keyframes backgroundScroll {
            0% { background-position: 0% 0%, 0 0, 0 0; }
            100% { background-position: 100% 0%, 0 0, 0 0; }
        }

        #game-container::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 20px;
            background: #d4a373; border-top: 4px solid #b5835a; z-index: 15;
        }

        #stress-border {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('assets/images/background/stress-border.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: 5;
            display: none;
        }

        h1, h2, h3, p, span, div {
            font-family: 'Pixelify Sans', cursive;
        }

        #ui {
            width: 100vw; 
            max-width: none;
            display: none; 
            justify-content: space-between;
            padding: 10px; 
            font-weight: bold; 
            font-size: 36px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
            background: transparent;
        }

        .stress-bar { width: 270px; height: 43px; background: #222; border: 2px solid #fff; font-size: 32px; }
        #stress-fill { height: 100%; width: 0%; background: #ff4b2b; }

        #fish {
            width: 90px; height: 90px; position: absolute; bottom: 20px; left: 20px;
            font-size: 70px; z-index: 20; transform: scaleX(1);
            display: flex; align-items: center; justify-content: center;
        }

        .obstacle { 
            position: absolute; 
            font-size: 40px; 
            z-index: 10;
            width: 40px;
            height: 40px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            animation: rise 4s infinite linear;
        }
        @keyframes rise {
            0% { transform: translateY(350px); opacity: 0; }
            50% { opacity: 0.6; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #001220; 
            background-image: url('assets/images/background/start-screen-bg.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 1000;
            text-align: center; padding: 20px;
        }

        #game-over-screen {
            background-image: url('assets/images/background/endgame-screen.png');
        }

        #best-score-tag {
            font-family: 'Pixelify Sans', cursive;
            font-size: 36px;
            color: white;
            font-weight: bold;
            -webkit-text-stroke: 1px black;
            text-shadow: 
                -0.5px -0.5px 0 black,
                0.5px -0.5px 0 black,
                -0.5px 0.5px 0 black,
                0.5px 0.5px 0 black;
        }

        #stress-message {
            font-family: 'Pixelify Sans', cursive;
            color: white;
            font-weight: bold;
            -webkit-text-stroke: 1px black;
            text-shadow: 
                -0.5px -0.5px 0 black,
                0.5px -0.5px 0 black,
                -0.5px 0.5px 0 black,
                0.5px 0.5px 0 black;
            position: relative;
            margin-top: -80px;
            z-index: 200;
        }

        #final-score {
            font-family: 'Pixelify Sans', cursive;
            color: white;
            font-weight: bold;
            -webkit-text-stroke: 1px black;
            text-shadow: 
                -0.5px -0.5px 0 black,
                0.5px -0.5px 0 black,
                -0.5px 0.5px 0 black,
                0.5px 0.5px 0 black;
        }

        #ranking-box {
            margin-top: 15px;
            font-size: 32px;
            background: #17283C;
            color: #fff;
            padding: 12px;
            border: 3px solid #00d2ff;
            width: 574px;
            height: 206px;
            max-height: 206px;
            overflow-y: auto;
            text-align: center;
            font-family: 'Pixelify Sans', cursive;
        }

        #rank-list {
            font-size: 24px;
        }

        #rank-list div {
            font-size: 24px;
        }

        input {
            padding: 12px; margin: 15px; border: 3px solid #00d2ff;
            background: #17283C; color: #fff; font-size: 18px; width: 574px; height: 74px;
            text-align: center; outline: none; font-family: 'Pixelify Sans', cursive;
        }

        input::placeholder {
            color: white;
        }

        input::-webkit-input-placeholder {
            color: white;
        }

        input::-moz-placeholder {
            color: white;
        }

        input:-ms-input-placeholder {
            color: white;
        }

        #player-name {
            font-family: 'Pixelify Sans', cursive;
        }

        button {
            padding: 15px 30px; background: #00d2ff; color: #000;
            border: none; font-weight: bold; font-family: 'Pixelify Sans', cursive;
            box-shadow: 4px 4px 0 #0086a3; cursor: pointer;
        }

        .jump { animation: jump 0.6s steps(8) forwards; }
        .high-jump { animation: high-jump 0.8s steps(10) forwards; }
        @keyframes jump { 0%, 100% { bottom: 20px; } 50% { bottom: 280px; } }
        @keyframes high-jump { 0%, 100% { bottom: 20px; } 50% { bottom: 420px; } }
    </style>
</head>
<body>

    <div id="start-screen" class="overlay">
        <img id="logo" src="assets/images/icons/logo.png" alt="·∫∏J√Å PIXEL" style="max-width: 600px; max-height: 200px; width: auto; height: auto; margin-bottom: 10px;">
        <div id="best-score-tag" style="margin: 5px 0;">MAIOR PONTUA√á√ÉO: 0</div>
        <input type="text" id="player-name" maxlength="8" placeholder="SEU NOME">
        <button id="start-btn" style="background: transparent; border: none; padding: 0; cursor: pointer;">
            <img src="assets/images/icons/start-button.png" alt="INICIAR JOGO" style="width: auto; height: auto; display: block;">
        </button>
        <div id="ranking-box">
            <p style="border-bottom: 1px solid #fff; margin-bottom: 5px; font-size: 32px;">- √öLTIMOS 10 JOGADORES -</p>
            <div id="rank-list">---</div>
        </div>
    </div>

    <div id="game-over-screen" class="overlay" style="display: none;">
        <img src="assets/images/icons/boom-icon.png" alt="BOOM!" style="width: auto; height: auto;">
        <p id="stress-message" style="width: 444px; height: 43px; font-size: 36px;">O estresse tomou conta!</p>
        <p id="final-score" style="margin: 10px 0; width: 250px; height: 43px; font-size: 36px;"></p>
        <button onclick="location.reload()" style="background: transparent; border: none; padding: 0; cursor: pointer;">
            <img src="assets/images/icons/restart-button.png" alt="RECOME√áAR" style="width: auto; height: auto; display: block;">
        </button>
    </div>

    <div id="ui">
        <div>STRESSE <div class="stress-bar"><div id="stress-fill"></div></div></div>
        <span id="score-val">00000</span>
    </div>
    
    <div id="game-container">
        <div id="stress-border"></div>
        <div id="fish">
            <svg id="Camada_2" data-name="Camada 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 146.37 90.62">
                <defs><style>.cls-1{fill:#0c0e08}.cls-2{fill:#ce8d53}.cls-3{fill:#496452}.cls-4{fill:#dde4e2}.cls-5{fill:#0d0501}.cls-6{fill:#46473d}.cls-7{fill:#0f110e}.cls-8{fill:#141715}.cls-9{fill:#110204}.cls-10{fill:#121412}.cls-11{fill:#4f5247}.cls-12{fill:#060701}.cls-13{fill:#e3c8a0}.cls-14{fill:#b8a671}.cls-15{fill:#a5a14d}.cls-16{fill:#c8bd89}.cls-17{fill:#bab094}.cls-18{fill:#b6a47c}.cls-19{fill:#d4b891}.cls-20{fill:#040104}.cls-21{fill:#80b6b8}.cls-22{fill:#030604}.cls-23{fill:#bc9f68}.cls-24{fill:#070302}.cls-25{fill:#040806}.cls-26{fill:#050403}.cls-27{fill:#0c0f09}.cls-28{fill:#060504}.cls-29{fill:#020504}.cls-30{fill:#a1a469}.cls-31{fill:#111b19}.cls-32{fill:#060606}.cls-33{fill:#caa36b}.cls-34{fill:#0f1410}.cls-35{fill:#aaa372}.cls-36{fill:#0b0702}.cls-37{fill:#110501}.cls-38{fill:#526240}.cls-39{fill:#c3a87a}.cls-40{fill:#080100}.cls-41{fill:#756a44}.cls-42{fill:#818d58}.cls-43{fill:#050805}.cls-44{fill:#999a5a}.cls-45{fill:#8c9759}.cls-46{fill:#495e44}.cls-47{fill:#bcb189}.cls-48{fill:#242623}.cls-49{fill:#020301}.cls-50{fill:#0c120d}.cls-51{fill:#040402}.cls-52{fill:#d69241}.cls-53{fill:#90956c}.cls-54{fill:#010503}.cls-55{fill:#8eae8e}.cls-56{fill:#090706}.cls-57{fill:#040202}.cls-58{fill:#191619}.cls-59{fill:#0b1514}.cls-60{fill:#040804}.cls-61{fill:#040608}.cls-62{fill:#060404}.cls-63{fill:#979f6d}.cls-64{fill:#030505}.cls-65{fill:#050602}.cls-66{fill:#030500}.cls-67{fill:#050508}.cls-68{fill:#baa875}.cls-69{fill:#040404}.cls-70{fill:#4c4e43}.cls-71{fill:#cabb86}.cls-72{fill:#9caa61}.cls-73{fill:#cbc190}.cls-74{fill:#0c0500}.cls-75{fill:#020305}.cls-76{fill:#090b09}.cls-77{fill:#a99f4c}.cls-78{fill:#060a09}.cls-79{fill:#030202}.cls-80{fill:#988f48}</style></defs>
                <g id="Camada_1-2" data-name="Camada 1"><g><path class="cls-80" d="M16.14,30.39c-.33,0-.67,0-1,0-4.41-5.8-10.42,2.34-5,5-1.74-.25-1.7.27.12,1.56l.54,4.82c1.13-1.23,2.91-1.1,4.34-.37l-1.79,1.28c.41,3.2-.32,5.77-2.21,7.72-.68.21-.64.55,0,1,.77,1.53.77,2.86,0,4-.18-.88-.52-.84-1,0-1.26-1.95-2.74-1.95-4,0-.69.21-.65.55,0,1,1.82,2.59,2.45,3.76,2,7.66l2,1.34c1.98.07,3.66.55,5.04,1.44l.96-5.44c.54,2.6,1.16,2.53,2,0-.66-2.55.34-3.88,3-4,.9-.24.88-.58,0-1,.87-.33.87-.67,0-1,1.92-.49,2.13-1.36,1.75-3.02,5.96.66,11.71,0,17.25-1.98,4.7-1.19,1.36-6.9-3.03-6.87-.12-2.05-2.44-3.09-6.97-3.13-1.8-2.53-3.2-2.51-5,0-1.88-1.31-2.21-2.98-1-5-.91-1.94-2.08-1.94-3,0-.33,0-.67,0-1,0l-.88-2c-1.2.85-1.24-.15-.12-3-.91-1.94-2.09-1.94-3,0Z"/><path class="cls-56" d="M60.14,70.39c-.35-1.05.73-3.81-.58-4.02-1.13-.18-8.13-.28-8.42.02-.25.26.17,3.03,0,4,1.13,1.13,6.73-3.02,5,5h23.5c3.52,0-1.72,13.12,5.5,10.01-1.72-8.03,3.88-3.88,5-5.01.34-.34-.36-4.64,0-5.01.38-.4,10.63-.4,11.01,0,.88.91-2.08,6.13,2.52,5.03,3.84-.92,1.88-4.32,2.52-4.99.6-.63,7.37.54,8.96-.04.34-1.67.64-4.92-1-4.5-18.01.31-36.01.14-54-.5Z"/><path class="cls-19" d="M46.14,55.39c-.19-.89-.52-.86-1,0-.87.28-.86.62,0,1-3.75,1.86-2.68,4.34,3.24,7.43l1.76,1.57c3.66.07,7.35-.05,11.01,0v5.01c14.93.97,30.05.86,44.99,0,7.09-5.15-4.73-10.33-10-5-.19-.89-.52-.85-1,0-1.49-2.85-6.67-1.42-9,0-.14-.69-.28-1.15-1-1l-.53-1.21c-5.41.24-10.85.41-16.32.5-.38-4.03-3.79-5.45-10.22-4.26.07-2.57.01-3.82-2.93-4.02-2.96-1.98-6.03-1.97-9,0Z"/><path class="cls-14" d="M46.14,10.39c-.07,1.6.63,4.15-1,5-.02-2.91-3.16-2.72-4,0,.13,3.32-.09,6.68,0,10,.15,2.16,1.33,2.12,3.05,1.95-1.06,4.62,4.13,7.32,5.95,3.05.3-1.56.64-3.23,1-5,.02,2.91,3.16,2.72,4,0,.31-1.61.64-3.28,1-5,2.51,5.36,11.03-.35,5-4-.35-.21-.83-1-1-1-.67-2.64-2.53-1.47-4,0-1.76-1.65-.76-3.05-1-5-.45-3.07-8.22-2.98-9,0Z"/><path class="cls-49" d="M101.14,10.39c-1.64-.08-2.34.93-2.1,3.01l-26.47.02-1.44,1.98c-.49,1.25-.98,5.1-.5,5.74,2.17,2.89,15.93,1.18,20.5-.74,1.26,1.95,2.74,1.95,4,0,1.95,1.96,4.05,1.95,6,0,3.21,2.72,6.74,2.71,10,0-.04-1.09.18-4.83,0-5.01-.37-.36-4.65.37-5.01.01s.37-4.65.01-5.01c-.18-.18-3.92.04-5.01,0Z"/><path class="cls-42" d="M70.14,10.39c-1.56,1.43-2.89,3.1-4,5,0,.33-.02.67,0,1,.42,1.58,1.75,2.92,4,4-1.68,1.78-3.35,3.45-5,5-7.54,6.23,7.9,12.84,8.08,1.9,4.81.03,7.21.45.99,1.65-1.79,1.35-1.3,16.92-.95,20.09l1.88,1.36c1.53.88,2.77.74,2.98-.96l-.18-15.93c2.31.07.59-1.54.25-1.26-.88.74.52,5.11,2.94,3.15,1.2-.9,1.89-1.78,1.68-3.17,3.76,1.11,5.98-.64,5.3-4.62,5,.37,7.38-5.62,3.02-7.21-6.65-.04-13.35.03-20.01,0,.02-1.66-.03-3.34,0-5.01l2.93-1.95c5.62.87,9.64-.15,12.07-3.05-5.38-.66-10.71-.66-16,0Z"/><path class="cls-34" d="M41.14,25.39c-.33,0-.67,0-1,0,.24,3.36,1.29,6.59,1,10-5.32-.07-10.68.08-16,0-1.95,1.61-1.95,3.39,0,5,1.67.03,3.33-.03,5,0,2.93.13,4.91.86,5.92,2.17,4.94.9,11.62.98,9.53-4.93l.55-2.24c.37,2.79,3.08,2.71,4,0,.76-1.57.75-3.43,0-5h-4c-.21-1.11.31-4.7.01-5.01-.18-.18-3.93.02-5.01,0Z"/><path class="cls-62" d="M21.14,56.39c-.02.33.05.68,0,1-1.9.05-2.9,1.38-3,4-.58.16-1.59-.2-2,0-1.99,4.67-.65,6,4,4,.54-.56.55-2.44,1.2-2.8.85-.47,2.34.07,3-.26,1.09-.55.52-1.79,2.23-2.02,1.84-.25,11.61-.24,12.93.21,2.47.85,1.23,4.36,1.67,4.83.31.32,7.3,0,8.96.04,1.7-7.2-6.73-1.98-5-9-7.56-.82-16.35-.79-24,0Z"/><path class="cls-11" d="M136.14,45.39c-1.67,1.43-.95,2.6,2.18,3.5.37.45.54,5.89-1.76,5.27l-.43,2.23-1.68,2.08c-1.72-.19-12.95-.66-10.41,2.7,2.22.33,2.15,2.65,1.08,4.22-.91-1.88-3.09-2.48-6.52-1.8-1.35-3.71-5.38-8.66-7.48-3.2-1.45-1.25-1.98-.69-1,1-2.28,1.68-1.77,2.61,1,2,1.19-.55,2.52.12,4,2-1.67,1.31-2.8,2.58-1.04,3.79-2.68-1.57-5.68-1-7.96,1.21-14.97.29-30.02-.22-45,0h-1c.85,2.54,47.57.15,53.53.99l1.47,4.01c1.77-.64.58-3.45,1.04-3.96.73-.81,8.7,1.25,9.96-1.04-.3-1.71-1.03-2.34-2.62-2.04l2.62-1.96c3.17-.09,7.67.88,10-1-1.1-1.71-1.1-3.04,0-4,1.65-.1,4.36.73,5-1-2.26-1.24-2.26-2.57,0-4,1.62-.06,4.41.7,5-1,.05-1.73-.96-2.4-3.04-2,.74-3.55.08-6.22-1.96-8-1.8-2.53-3.2-2.52-5,0Z"/><path class="cls-61" d="M95.14.39c-1.6.25-8.66-.36-9.01,0-.37.38.38,4.63.01,5.01-.67.7-12.77-.77-15.01,0-.65,1.06-1.04,3.46-.13,4.36.7.7,18.68.54,19.5-.54-.28-4.28,1.21-4.45,5.08-4.32.28-.23.14-4.01-.45-4.5Z"/><path class="cls-23" d="M40.14,67.39c-2.83,1.59-2.77,4.38,0,6,.63,2.94,14.47,2.56,15,2,.14-.14.08-3.77-.08-3.92-.33-.33-2.38.47-3.93-1.07s-.71-3.57-1.05-3.94c-1.14-1.23-8.14.92-9.95.94Z"/><path class="cls-12" d="M61.14,16.39c-.31.79.33,3.7,0,4-.41.38-3.93-.36-5.01,0-2.92,7.15,3.98,9.55,9,5,1.66-.08,3.35.07,5.01,0-.02-1.66.03-3.34,0-5.01.15-3.01-3.34-2.73-4,0l-.81-.69-.2-4.32c-1.05-.15-3.62.06-4,1.01Z"/><path class="cls-33" d="M96.14,81.39c.69-1.76,3.48-.6,3.94-1.07.14-.14.2-3.78.06-3.93-.31-.32-8.65-.28-8.96.05-.33.36.52,2.38-1.05,3.95s-3.6.75-3.93,1.07c-.15.15-.21,3.78-.08,3.92.34.36,8.33.08,10,0,2.97-.49,2.64-3.09,0-4Z"/><path class="cls-48" d="M71.14,5.39c.43,1.53-1.38,3.82,1.47,4.01,2.36.16,16.93.63,17.54,0,.36-.38-.37-4.65-.01-5.01.37-.36,4.62.38,5.01.01.28-.26-.22-3.04,0-4.01.02-.11.05-.24.08-.39.07.01.14.03.21.04.02.01.03.02.05.03.21.12.43.22.66.31-.17.24,0,4.01.01,5-.2,1.64-1.22,2.38-3.07,2.21.43,4.3-5.9,7.02-6.93,2.79-5.32.08-10.68-.11-16,0,.08-1.63-.72-4.41,1-5Z"/><path class="cls-48" d="M70.14,10.39c-.09,1.66.07,3.35,0,5.01h-4c.03-1.67-.04-3.35,0-5.01,1.33-.03,2.67.03,4,0Z"/><path class="cls-35" d="M10.14,25.39c-4.92-1.09-5.9,4.75-4.97,8.67.65,2.74,2.62,2.15,4.97,1.33-.18-1.62.11-3.37,0-5.01,1.66-.03,3.34.04,5.01,0,0-1.67,0-3.33,0-5-.72-2.9-3.84-2.83-5,0Z"/><path class="cls-69" d="M40.14,76.39c-.14.14-.2,4,0,4h15c.2,0,.2-4,0-4-2.15,0-14.48-.54-15,0Z"/><path class="cls-6" d="M5.14,55.39c-1.68-.67-2.06,3.3-1.96,3.13.55-.93.86-2.02.96-3.13-1.54.43-3.81-1.38-4.01,1.47-.13,1.83-.37,7.47.43,8.61,1.02,1.44,4.19.62,4.54.96.49.49-.36,4.57.03,4.97.36.37,8.64.41,10.01-1.01q-2.21-2.85,0,0c1.46-1.52.68-3.42,1.13-3.87.5-.49,2.39.41,3.87-1.13h-4.01s0-4,0-4c-2.83,1.35,2.7,4.21-6,4-1.94-1.9-2.6-4.45-2-7.66l-2-1.34c0-.33,0-.67,0-1,2.99-.07,2.76-4.46,0-5-1.73.64-.91,3.35-1,5Z"/><path class="cls-70" d="M5.14,25.39c-3.18.98-3.51,8.67-1,10,0,.63,1.25,4.72,2,5,1.56-.79,2.9-.79,4,0,.2,3.28,0,6.7,0,10-2.99.07-2.76,4.46,0,5,.33,0,.67.03,1,0,2.93,0,2.8-3.34,0-4,0-.33,0-.67,0-1,.86-3.52,2.19-6.52,4-9-.64-1.75-3.45-.55-3.94-1.06-.18-.18-1.01-4.48-1.06-4.94-1.52-.43-3.82,1.38-4.01-1.47-.34-5.2-1.41-7.63,4.01-8.53-.75-1.81-2.21-4.02-4-5-.39.13-.83-.07-.91.58-.29,1.47,0,2.96-.09,4.42Z"/><path class="cls-54" d="M111.14,20.39c-6.57,6.6,5.04,9.64,10,5-.06-1.66.05-3.34,0-5.01-3.32-.04-6.68.07-10.01,0Z"/><path class="cls-22" d="M141.14,45.39c.15,3.31-.11,6.69,0,10.01h5.01c.72-2.09-.51-7.39,0-10.01-1.66-.03-3.34.04-5.01,0Z"/><path class="cls-8" d="M55.14,10.39c-.16-1.29.59-4.83-.58-5.02h-8.43c-.06,1.67.08,3.36,0,5.02h9Z"/><path class="cls-64" d="M6.14,20.39v5.01s4,0,4,0c1.5-.25,3.41.17,5,0v-5.01c-2.38.47-7.1-.65-9,0Z"/><path class="cls-57" d="M40.14,67.39c-.2,0-2.77-1.96-3.96-.98-.25.21-1.2,5.66-1.09,6.45.42,2.88,4.88,4.44,5.05.52.09-1.99-.06-4.01,0-6Z"/><path class="cls-79" d="M40.14,25.39c-.24-3.3.18-6.7,0-10-6.69-1.63-3.25,5.14-4,10.01,1.33.03,2.67-.04,4,0Z"/><path class="cls-67" d="M126.14,66.39c-3.32.09-6.68-.07-10,0-1.65,6.77,5.52,3.2,10,4v-4Z"/><path class="cls-25" d="M5.14,25.39c-5.56-1.45-4.31,3.55-4,7.55.24,3.07-.49,2.57,3,2.45-.02-1.72.85-7.09,1-10Z"/><path class="cls-20" d="M4.14,55.39C0,54.78.72,64.98,1.15,65.39c.13.12,2.75.11,3.49,0,.99-.14.41-8.28.51-10.01h-1Z"/><path class="cls-51" d="M86.14,86.39c-1.62,6.68,5.14,3.26,10,3.99-.73-6.36-4.94-3.49-10-3.99Z"/><path class="cls-29" d="M136.14,61.39c-5.09.29-9.81-2.22-9.01,3.49.16,1.13,7.43.22,9.01.51v-4Z"/><path class="cls-7" d="M96.14,5.39c-4.72,5.24,1.02,9.84,5,5,0-1.67.01-3.34,0-5.01-1.66,0-3.34,0-5.01,0Z"/><path class="cls-59" d="M121.14,25.39c-5.25,4.13.87,10.25,5,5-.06-1.66.05-3.34,0-5.01-1.66-.06-3.34.08-5.01,0Z"/><path class="cls-31" d="M126.14,30.39c-5.25,4.13.87,10.25,5,5-.09-1.66.07-3.35,0-5.01-1.66-.05-3.34.06-5.01,0Z"/><path class="cls-50" d="M131.14,35.39c-2.74,1.31-2.77,3.7,0,5,1.8,2.52,3.2,2.51,5,0-.03-1.67.03-3.34,0-5.01-1.66-.05-3.34.06-5.01,0Z"/><path class="cls-27" d="M136.14,40.39c-3.08-.11-2.94,4.78,0,5,1.67.02,3.33-.03,5,0-.08-1.66.07-3.35,0-5.01-1.66-.03-3.34.04-5.01,0Z"/><path class="cls-10" d="M41.14,15.39c.9-.16,3.78.24,4,0,.56-.59,1.38-6.44-3.37-4.87-3.49,1.15-.66,4.24-.63,4.87Z"/><path class="cls-28" d="M60.14,15.39v-5.01c-5.26-.69-4.02.66-4,5.01,1.65,1.55,3.08.02,4,0Z"/><path class="cls-76" d="M20.14,30.39c0-1.67.02-3.34,0-5.01-5.26-.69-4.01.66-4,5.01,1,0,2,0,3,0,.28.87.62.86,1,0Z"/><path class="cls-32" d="M6.14,50.39v5c1.33,0,2.67,0,4,0v-5c-1.13.22-3.14-.32-4,0Z"/><path class="cls-26" d="M96.14,81.39c-.32.83.23,2.89,0,4,1.66-.08,3.35.07,5.01,0,.69-5.26-.66-4.01-5.01-4Z"/><path class="cls-66" d="M25.14,35.39c0-1.67.02-3.34,0-5.01-5.26-.69-4.01.66-4,5.01,1,.01,2-.02,3,0,.18.9.52.86,1,0Z"/><path class="cls-71" d="M19.14,30.39c-.59.9-2.82.78-3.05,1.59-1.21,4.26,1.06,3.34,4.05,3.41,0-1.67,0-3.33,0-5h-1Z"/><path class="cls-17" d="M66.14,16.39c.07.95-.18,3.82,0,4,.25.25,3.1-.17,4,0-.03-1.33.04-2.68,0-4.01h-4.01Z"/><path class="cls-78" d="M141.14,56.39c-1.33.05-2.68-.05-4,0-.39,4.5-.26,4.29,4,4,.32-.86-.22-2.87,0-4Z"/><path class="cls-43" d="M10.14,40.39c-.25-3.98,1.3-4.44-4-4v4c.85.32,2.87-.22,4,0Z"/><path class="cls-13" d="M40.14,50.39c-6.3,0-12.65-.05-18.95.05-.67,1.59,0,3.76-.05,4.95,7.56.82,16.35.79,24,0,.33,0,.67,0,1,0,3.8-.22,2.35-5.44-1-5-.07-2.99-4.46-2.76-5,0Z"/><path class="cls-38" d="M46.14,35.39c-2.06.77-.5,4.48-1,5.01s-12.84.03-15,0c.63,1.83,4.62.6,5,1,.37.37-.44,3.51.02,3.98.65.65,6.45-1.28,4.97,5.03h5c1.69-.34,1.92-1.55,1.98-3,3.16.97,3-3.87,2.02-6-.31-2.95-1.31-4.95-3-6Z"/><path class="cls-68" d="M6.14,56.39v9.01c1.32.03,2.67-.04,4,0v-9.01s-4,0-4,0Z"/><path class="cls-65" d="M15.14,41.39h-4c0,2.99,0,6.01,0,9h4c-.47-2.32.65-7.21,0-9Z"/><path class="cls-6" d="M21.14,55.39c-.02.33.02.67,0,1h24s0-1,0-1h-24Z"/><path class="cls-73" d="M21.14,57.39c-5.24-3.1-7.39.91-3,4,3.5-.99,2.47-.79,3-4Z"/><path class="cls-47" d="M24.14,35.39c-3.07,1.32-3.48,1.24-3,5,1.33.05,2.67-.02,4,0,0-1.67,0-3.33,0-5-.33,0-.67,0-1,0Z"/><path class="cls-16" d="M11.14,51.39v4c3.89-.34,4.47,1.43,4-4h-4Z"/><path class="cls-15" d="M81.14,35.39c-1.76-.63-.6-3.47-1.07-3.94-.14-.14-3.78-.2-3.93-.06-.6.57.37,13.87.04,16.56-.14,1.11.43,1.96-1.04,2.45-.35-1.26-.75-2.09-2-2l-.09-12.62c-.98-2.92-6.05-3.63-6.9-.38-3.32.96-3.06,13.45,0,15,.05-1.73-.95-2.39-3-2v-11.62c-.52-4.04-4.95-4.73-7-1.38l-2.01,2.17c-.04,6-1.67,18.47-1.98,5.11l-2.01-1.28c-.28-.87-.62-.86-1,0v4.01c-1.31,1.21-4.91-3.3-4,4.99.1.87,1.94,3.1,1,5,2.99,0,6.01-.02,9,0l3.38,2.03,18.61-.54c.99,3.72,2.33,5.22,4.01,4.51.87-.28.86-.62,0-1l2-1.09c-.63-3.78.04-6.75,2-8.91.87-4.5,1.17-10.24,0-15,.45-3.14-3.19-2.62-4,0Z"/><path class="cls-52" d="M55.14,55.39c1.38,1.2.72,5.69,1,6,.43.46,9.59-.44,10,0,.35.37-.36,3.65-.01,4.02.66.69,16.63.13,19.01-1.01,2.51-4.29,1.18-5.29-4-3-1.97-.68.39-5.58-3.88-6.48-7.32.75-14.77.53-22.12.48Z"/><path class="cls-2" d="M106.14,61.39c0-7.3-5.83-8.51-5.84-.78-5.43-.71-6.82.89-4.16,4.78,3.32-.12,6.69.09,10.01,0v5.01c2.99-.06,6.01.04,9,0-.01-1.66.03-3.34,0-5.01-.8-1.43-2.13-2.1-4-2-.3-.61-.96-1.17-1-2-.53-2.83-3.02-2.51-4,0Z"/><path class="cls-41" d="M95.14,30.39c.46-2.58-3.26-2.65-4.93-1.46-2.09,1.5-3.61,15.43-.07,16.46-2.19,3.54-2.85,4.01-2,1.4l-2-1.4c3.3-1.58,3.3-10.47-1-10,.52.54.03,12.85,0,15l-1.35,2c0,3.45-.88,6.11-2.65,8v1c.91.32,3.55-.38,3.99.02.34.31-.25,2.33,0,2.98.24.6.57.69,1,1,2.75-2.65,6.86-3.85,9,0,.33,0,.67,0.01,1,0-1.74-6.53,3.95-2.95,5.01-3.99.3-.3-.22-3.9,0-5.01,6.51-1.88,2.43,4.05,5,5.01,2.98.38,2.87-5.44,0-6-1.6-1.97-3.39-1.96-5,0-.19-.89-.52-.86-1,0l-1.95,1.55c1.16,2.81.48,2.29-2.05-1.55,4.16-1.26,2.24-8.26-2.79-6.98-.85-.59-1-11.51-.52-11.87,4.26-.13,6.62-4.53,2.31-6.15Z"/><path class="cls-40" d="M95.14,65.39c1.43-5.59-3.49-4.28-7.53-4.01-2.84.19-1.04,2.48-1.47,4.01,2.62,1.89,5.85.06,9,0Z"/><path class="cls-38" d="M55.14,25.39c-2.89,1.24-2.87,3.8,0,5-2.49,1.44-1.73,4.54,1,5-2.02-1.32-3.69-2.98-5-5,2.83-.56,2.72-4.39,0-5-1.6.84-.97,3.4-1,5s0,3.33,0,5c-2.73,1.86-2.78,4.12,0,6,.16,4.14-1.21,10.45,5,9.01.26-5.17,1.09-9.73,1-15.01,1.66.06,3.34-.05,5.01,0v15.01s4.99,0,4.99,0v-15h5.01s-.01,15.01-.01,15.01c1.17-.19,3.08.3,4.01,0,.54-2.83-.73-19.31,0-20.01.32-.31,3.9.22,5.01.01v-5.01c-1.57.25-8.69-.34-9.01,0-.56.61,1.9,8.28-5.33,5.02-1.5-.68-.35-3.65-.67-5.02-2.98.14-6.02-.1-9.01,0v-5.01c-1.69.57-.95,3.39-.99,5Z"/><path class="cls-24" d="M51.14,25.39c-.17.18,0,4.02,0,5,0,2.93,3.34,2.8,4,0-.1-1.63-.04-3.36,0-5-.9.16-3.78-.24-4,0Z"/><path class="cls-3" d="M101.14,20.39c-2.52,1.8-2.53,3.2,0,5,3.06,1.24,3.72,2.91,2,5-.69.34-1.36.13-2-.45-.52.1-1.05,9.42,0,10.45.68,1.9,2.34,2.56,5,2,1.81-.08,3.85-.32,6.11-.71,1.52-5.11,1.96-6.51,1.86.37l2.02,3.34c-3.01.88-3.37,9.52,0,10,2.71,4.97,10.45.13,5-4,.89-.18.86-.52,0-1,2.07-1.14,3.89-2.32,5.47-3.55l-.47-1.45-.84-1.91c-3.24.54-2.96-.49.84-3.09,1.98,2.06,2.69,4.92,2.12,8.61l1.88,1.39c4.17,1.08,4.49-8.53,1-10,0-1.66.09-3.35,0-5-1.66-.06-3.34.05-5.01,0-.05-1.66.06-3.34,0-5.01-1.66-.06-3.34.05-5.01,0-.05-1.66.06-3.34,0-5.01-3.31-.15-6.69.11-10.01,0-.05-1.66.06-3.34,0-5.01-3.32-.06-6.68.02-10,0Z"/><path class="cls-46" d="M91.14,20.39c1.7,8.03-3.87,3.86-5.01,4.99-.36.36.37,4.65.01,5.01-1.13,1.13-6.7-3.03-5.01,4.99.86.31,3.7-.31,4,0,1.92,2.35.86,6.81,1,10,0,2.93,3.34,2.8,4,0,.02-2.43,0-13.89,1.06-14.95.31-.31,2.97-.03,3.94-.05,1.57,2.7,3.43,2.72,5,0,1.05-1.7,1.01-5.16-2-5-.36-2.42-1.36-4.09-3-5-1.33,0-2.67,0-4,0Z"/><path class="cls-18" d="M96.14,5.39c-8.91,0-2.96,2.23-5.96,4.57-1.06.83-2.97.19-4.04.43-5.18,1.17-9.53,1.23-15.01,1-.03,1.33.04,2.67,0,4h30.01s0-5,0-5c-1.66-.06-3.34.05-5.01,0,0-1.66,0-3.34,0-5.01Z"/><path class="cls-63" d="M95.14,20.39c-.48,6.72-.03,4.01,3,5,1.97,1.41,2.97,1.41,3,0-.03-1.67.02-3.33,0-5-2-.01-4,0-6,0Z"/><path class="cls-30" d="M46.14,35.39v6.01s3,0,3,0h1c-.08-1.99,0-4.01,0-6-1.12.22-3.15-.32-4,0Z"/><path class="cls-21" d="M106.14,45.39c-2.81,2.17-2.94,7.91,0,10,1.8,1.69,3.46,3.36,5,5,8.05-1.67,3.84,3.8,4.99,5.01.31.32,8.43.19,9.01,0,1.85-5.28-.08-6.97-5.45-5.82-.41-2.6-1.59-4-3.55-4.18-.42-2.91.08-6.87,0-10-.57-3.13-9.16-2.99-10,0Z"/><path class="cls-55" d="M121.14,51.39c-.03,1.33.04,2.67,0,4h-5.01c.09.6,1.88,5.69,2.14,5.86,2.42,1.57,8.41-2.93,6.86,4.14,2.05-.72.5-4.47,1-5.01,1.34-1.44,12.38,3.37,10-3.99-.2-1.33-1.2-2.16-3-2.5.2-2.72-1.03-5.86-3.03-3.06-3.17-.18-6.16,0-8.97.56Z"/><path class="cls-44" d="M131.14,40.39c0,3.13.82,7.71-1,10-.72-2.89-8.63-3.12-9,0,0,.33,0,.67,0,1,1.71.27,9.67-.38,10,0,.51.57-2.11,5.26,5,5.01.22,0,4.03-1.36,4.07-1.57.19-.96.2-8.11-.11-8.39-.51-.46-3.3.73-3.96-1.04-.29-.79.02-3.7,0-5-1.67-.03-3.33.02-5,0Z"/><path class="cls-58" d="M106.14,55.39v6c.35.13,3.62.13,4,0,.07-.02.98-.93,1-1,.37-1.17-.24-3.56,0-5.01-1.66-.03-3.34.03-5.01,0Z"/><path class="cls-9" d="M115.14,65.39c-.03-1.33.04-2.68,0-4-2.61.12-4.59-1-4,2,.83,1.68-.88,2.63,4,2Z"/><path class="cls-75" d="M15.14,70.39c1.49-6.5-4.17-3.38-9-4-1.48,6.51,4.18,3.36,9,4Z"/><path class="cls-5" d="M85.14,50.39h-4s0,10,0,10h4c.03-3.32-.06-6.68,0-10Z"/><path class="cls-77" d="M95.14,30.39c1.38,6.33-3.07,3.11-4.01,3.99-.58.55-.57,15.46,0,16.01.38.36,4.64-.37,5.01-.01.18.18-.04,3.92,0,5.01,0,2.93,3.34,2.8,4,0,.33,0,.67,0,1,0,.87-.28.86-.62,0-1-.75-7.64-.94-15.46-.11-23.08l-.89-.92c-1.67.03-3.34-.04-5,0Z"/><path class="cls-1" d="M101.14,40.39c-.82,4.61-.82,9.28,0,14v1c1.67,0,3.34-.03,5,0,0-3.29.22-6.74,0-10,2.76-.84,2.84-2.27,0-3-.53-2.17-3.1-2.36-5-2Z"/><path class="cls-39" d="M91.14,55.39c-1.55-1.55-.75-3.6-1.07-3.93-.15-.15-3.78-.21-3.92-.08-.36.34.24,7.43,0,9.01,1.58-.25,8.67.35,9.01,0,.13-.14.08-3.77-.08-3.92-.33-.33-2.38.47-3.93-1.07Z"/><path class="cls-36" d="M86.14,45.39c.18,4.21-1.54,5.7,4,5.01.04-1.66-.01-3.34,0-5.01h-4Z"/><path class="cls-37" d="M96.14,55.39c.05,1.66-.06,3.34,0,5.01,5.26.69,4.01-.65,4-5.01h-4Z"/><path class="cls-74" d="M91.14,55.39c2.07,2.07,6.09-1.9,3.99-3.99s-6.07,1.92-3.99,3.99Z"/><path class="cls-53" d="M51.14,30.39c0,1.67-.01,3.34,0,5.01,1.66.05,3.34-.06,5.01,0-.04-2.46-.95-4.15-1-5h-4Z"/><path class="cls-72" d="M116.14,45.39c-.08-3.32.06-6.68,0-10.01h-5.01c-.21,1.12.32,4.69.01,5.01-.7.74-5.86-1.79-5.01,1.99.19.78-.06,2.05,0,3h10Z"/><path class="cls-60" d="M126.14,40.39c-3.01.21-2.72,4.22,0,5l-.69.81c-1.03.51-3.98-.1-4.31.2-.17.15.03,3.06,0,4,1.6-.25,8.64.36,9,0s-.26-8.32,0-10.01c-1.33-.03-2.67.04-4,0Z"/><path class="cls-41" d="M98.14,25.39c2.68.88,1.89,2.93,2,5,.43,7.82-1.16,16.52,1,24,.1-4.65-.13-9.35,0-14,.09-3.16-1.25-8.95,2-10,.15-2.33-.51-4-2-5-1,0-2,0-3,0Z"/><path class="cls-45" d="M101.14,25.39c.04,2.67-1.04,5.77,2,5,3.01-.97,3.5,1.75,3-5-1.66-.01-3.34,0-5,0Z"/><path class="cls-4" d="M126.14,40.39c-5.3-.13-5.43-1.06-5.01,5.01,1.09-.17,4.75.25,5.01,0,.27-.27-.19-3.94,0-5Z"/></g></g>
            </svg>
        </div>
    </div>

    <script>
        const fish = document.getElementById("fish");
        const container = document.getElementById("game-container");
        const stressFill = document.getElementById("stress-fill");
        const scoreVal = document.getElementById("score-val");
        const startBtn = document.getElementById("start-btn");
        const rankList = document.getElementById("rank-list");
        const bestScoreTag = document.getElementById("best-score-tag");
        
        let score = 0;
        let isGameOver = false;
        let speed = 5;
        let stress = 0;
        let playerName = "";
        let dayNightCounter = 0;
        let isStarted = false;

        // --- SISTEMA DE SONS ---
        const startEndgameSound = new Audio('assets/sounds/start-endgame.mp3');
        const badCatchSound = new Audio('assets/sounds/bad-catch-sound.mp3');
        const goodCatchSound = new Audio('assets/sounds/good-catch-sound.mp3');
        const soundtrack = new Audio('assets/sounds/soundtrack.mp3');
        const jumpSound = new Audio('assets/sounds/jump-sound.mp3');
        
        // Configure soundtrack to loop
        soundtrack.loop = true;
        
        // Play start screen sound on page load
        startEndgameSound.play().catch(e => console.log("Audio play failed:", e));

        // Asset paths for items
        const badItemPaths = [
            'assets/images/items/bad/item1.png',
            'assets/images/items/bad/item2.png',
            'assets/images/items/bad/item3.png',
            'assets/images/items/bad/item4.png'
        ];
        const goodItemPaths = [
            'assets/images/items/good/item1.png',
            'assets/images/items/good/item2.png',
            'assets/images/items/good/item3.png',
            'assets/images/items/good/item4.png'
        ];
        
        // Fallback emojis if images fail to load
        const badItems = ["üìÑ", "üò†", "üí∏", "üìâ"];
        const goodItems = ["üíÉ", "üéµ", "‚úàÔ∏è", "üí∞"];
        
        // Cache for loaded images
        const itemImages = {
            bad: [],
            good: []
        };
        
        // Preload item images
        function preloadItemImages() {
            badItemPaths.forEach((path, index) => {
                const img = new Image();
                img.onload = () => { itemImages.bad[index] = img; };
                img.onerror = () => { itemImages.bad[index] = null; };
                img.src = path;
            });
            
            goodItemPaths.forEach((path, index) => {
                const img = new Image();
                img.onload = () => { itemImages.good[index] = img; };
                img.onerror = () => { itemImages.good[index] = null; };
                img.src = path;
            });
        }
        
        // Initialize image preloading
        preloadItemImages();

        // --- SISTEMA DE RANKING ---
        function updateRankingDisplay() {
            const records = JSON.parse(localStorage.getItem("eja_records") || "[]");
            const best = localStorage.getItem("eja_best") || 0;
            bestScoreTag.innerText = `MAIOR PONTUA√á√ÉO: ${best}`;
            
            if(records.length === 0) {
                rankList.innerHTML = "SEM REGISTROS";
            } else {
                rankList.innerHTML = records.map(r => `<div>${r.name}: ${r.score}</div>`).join('');
            }
        }

        function saveGameRecord(name, score) {
            let records = JSON.parse(localStorage.getItem("eja_records") || "[]");
            let best = parseInt(localStorage.getItem("eja_best") || 0);

            records.unshift({ name, score });
            if(records.length > 10) records.pop();
            localStorage.setItem("eja_records", JSON.stringify(records));

            if(score > best) {
                localStorage.setItem("eja_best", score);
            }
        }
        updateRankingDisplay();

        // --- SISTEMA DE BOLHAS ---
        function createBubble() {
            if(isGameOver || !isStarted) return;
            const bubble = document.createElement("div");
            bubble.className = "bubble";
            const size = Math.random() * 8 + 4;
            bubble.style.width = size + "px";
            bubble.style.height = size + "px";
            bubble.style.left = Math.random() * 100 + "%";
            container.appendChild(bubble);
            setTimeout(() => bubble.remove(), 4000);
        }

        // --- SISTEMA DIA E NOITE ---
        function updateDayNight() {
            dayNightCounter += 0.005;
            const intensity = (Math.sin(dayNightCounter) + 1) / 2;
            const r = Math.floor(0 * intensity);
            const g = Math.floor(78 * intensity);
            const b = Math.floor(146 * intensity + 32 * (1-intensity));
            container.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
        }

        // IN√çCIO DO JOGO
        startBtn.addEventListener("click", () => {
            playerName = document.getElementById("player-name").value.trim().toUpperCase() || "·∫∏J√Å";
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("ui").style.display = "flex";
            container.style.display = "block";
            isGameOver = false;
            isStarted = true;
            
            // Stop start screen sound and start game soundtrack
            startEndgameSound.pause();
            startEndgameSound.currentTime = 0;
            soundtrack.play().catch(e => console.log("Soundtrack play failed:", e));
            
            setInterval(createBubble, 600);
            requestAnimationFrame(gameLoop);
        });

        let lastTime = 0;
        let spawnTimer = 0;

        function gameLoop(timestamp) {
            if (isGameOver) return;
            let deltaTime = timestamp - lastTime;
            lastTime = timestamp;
            spawnTimer += deltaTime || 0;

            updateDayNight();

            if (spawnTimer > 1500) {
                spawnItem();
                spawnTimer = 0;
            }
            requestAnimationFrame(gameLoop);
        }

        // --- SISTEMA DE OBST√ÅCULOS DUPLOS ---
        function spawnItem() {
            const isDouble = Math.random() < 0.25; // 25% de chance de obst√°culo duplo
            if (isDouble) {
                createSingleElement(20);  // Baixo
                createSingleElement(400); // Alto
            } else {
                const randomPos = [20, 400][Math.floor(Math.random() * 2)];
                createSingleElement(randomPos);
            }
        }

        function createSingleElement(bottomPos) {
            const item = document.createElement("div");
            const isBad = Math.random() < 0.7;
            item.className = "obstacle";
            item.dataset.type = isBad ? "bad" : "good";
            
            // Select random item index
            const itemIndex = Math.floor(Math.random() * (isBad ? badItems.length : goodItems.length));
            
            // Get image path
            const imagePath = isBad ? badItemPaths[itemIndex] : goodItemPaths[itemIndex];
            const itemType = isBad ? "bad" : "good";
            const img = itemImages[itemType][itemIndex];
            
            // Try to use image, fallback to emoji
            if (img && img.complete && img.naturalWidth > 0) {
                // Image loaded successfully - use it
                item.style.backgroundImage = `url('${imagePath}')`;
                item.innerText = '';
            } else {
                // Try to load image or use emoji fallback
                const testImg = new Image();
                testImg.onload = () => {
                    item.style.backgroundImage = `url('${imagePath}')`;
                    item.innerText = '';
                    itemImages[itemType][itemIndex] = testImg;
                };
                testImg.onerror = () => {
                    // Fallback to emoji if image fails to load
                    item.style.backgroundImage = 'none';
                    item.innerText = isBad ? badItems[itemIndex] : goodItems[itemIndex];
                };
                testImg.src = imagePath;
                // Set emoji as initial content while image loads
                item.innerText = isBad ? badItems[itemIndex] : goodItems[itemIndex];
            }
            
            container.appendChild(item);

            let x = container.offsetWidth;
            item.style.bottom = bottomPos + "px";

            let moveInt = setInterval(() => {
                if (isGameOver) { clearInterval(moveInt); item.remove(); return; }
                x -= speed;
                item.style.left = x + "px";

                // Use fixed hitbox based on original fish size (90px), ignoring visual scale
                let fishRect = fish.getBoundingClientRect();
                let fishLeft = fishRect.left + (fishRect.width - 90) / 2; // Center the fixed hitbox
                let fishTop = fishRect.top + (fishRect.height - 90) / 2;
                let fishRight = fishLeft + 90;
                let fishBottom = fishTop + 90;
                
                let iR = item.getBoundingClientRect();

                if (fishRight > iR.left + 10 && fishLeft < iR.right - 10 && fishBottom > iR.top + 10 && fishTop < iR.bottom - 10) {
                    // Play catch sound based on item type
                    if (item.dataset.type === "bad") {
                        badCatchSound.currentTime = 0;
                        badCatchSound.play().catch(e => console.log("Bad catch sound play failed:", e));
                    } else {
                        goodCatchSound.currentTime = 0;
                        goodCatchSound.play().catch(e => console.log("Good catch sound play failed:", e));
                    }
                    
                    stress = item.dataset.type === "bad" ? stress + 1 : Math.max(0, stress - 1);
                    fish.style.transform = `scaleX(1) scale(${1 + (stress * 0.2)})`;
                    fish.style.filter = `sepia(${stress * 0.4}) saturate(${1 + stress})`;
                    stressFill.style.width = (stress * 20) + "%";
                    
                    // Show stress border when stress is over half (2.5/5)
                    const stressBorder = document.getElementById("stress-border");
                    if (stress > 2.5) {
                        stressBorder.style.display = "block";
                    } else {
                        stressBorder.style.display = "none";
                    }
                    
                    if (stress >= 5) {
                        isGameOver = true;
                        fish.innerHTML = '<img src="assets/images/icons/dead-fish.png" alt="Dead Fish" style="width: 100%; height: 100%; object-fit: contain;">';
                        saveGameRecord(playerName, score);
                        
                        // Stop soundtrack and play endgame sound
                        soundtrack.pause();
                        soundtrack.currentTime = 0;
                        startEndgameSound.currentTime = 0;
                        startEndgameSound.play().catch(e => console.log("Endgame sound play failed:", e));
                        
                        setTimeout(() => {
                            document.getElementById("final-score").innerText = playerName + ": " + score + " PTS";
                            document.getElementById("game-over-screen").style.display = "flex";
                        }, 500);
                    }
                    clearInterval(moveInt);
                    item.remove();
                }

                if (x < -50) {
                    clearInterval(moveInt);
                    item.remove();
                    score++;
                    scoreVal.innerText = String(score).padStart(5, '0');
                    if (score % 5 === 0) speed += 0.7; // Aumento de velocidade a cada 5 pontos
                }
            }, 20);
        }

        function handleJump(type) {
            if (!fish.classList.contains("jump") && !fish.classList.contains("high-jump") && !isGameOver) {
                // Play jump sound
                jumpSound.currentTime = 0;
                jumpSound.play().catch(e => console.log("Jump sound play failed:", e));
                
                fish.classList.add(type);
                setTimeout(() => fish.classList.remove(type), type === "jump" ? 600 : 800);
            }
        }

        // --- SISTEMA DE CONTROLES MULTIPLATAFORMA ---
        window.addEventListener("keydown", (e) => {
            if (e.code === "Space") {
                e.preventDefault();
                handleJump("jump");
            }
            if (e.code === "ArrowUp") {
                e.preventDefault();
                handleJump("high-jump");
            }
        });

        let touchStartY = 0;
        window.addEventListener("touchstart", (e) => { touchStartY = e.touches[0].clientY; });
        window.addEventListener("touchend", (e) => {
            let touchEndY = e.changedTouches[0].clientY;
            let diff = touchStartY - touchEndY;
            if (diff > 50) handleJump("high-jump"); // Deslizar p/ cima = Pulo Alto
            else handleJump("jump"); // Toque simples = Pulo Normal
        });
    </script>
</body>
</html>